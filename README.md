# Coppock-VIX (COVIX) Trading Strategy
Event Based Backtester leveraging the Coppock Curve and VIX Index.

## 1 Strategy Overview
The chosen strategy, COVIX, uses a strategic combination of a price momentum indicator, the Coppock Curve, with confirmation from a sentiment based index, VIX. More specifically, the Coppock Curve is a price momentum indicator used in the long-term to primarily identify major upturns and downturns in a stock market index. It serves as a reliable indicator to identify long-term buying and selling opportunities. On the other hand, VIX is a real-time indicator of the marketâ€™s expectations of short-term price changes of the S&P 500 Index. It is primarily used to gauge market sentiment and the degree of fear among market participants. 

By combining these indicators, COVIX optimises entry and exit points by aligning trend direction with volatility awareness, providing more informed, risk-adjusted trading suggestionsâ€”a fundamental strength of this strategy. By using VIX as a filter, this strategy can reduce false signals from the Coppock Curve, allowing us to understand market volatility. Therefore, the amalgamation of these two indicators facilitates informed and risk-adjusted decisions within this strategy.


## 2 Entry and Exit Signals
The basis for our entry (buy) and exit (sell) signals for each stock in the portfolio is grounded in a dual-indicator approach, examining the Coppock Curve value followed by the VIX level. We interpret each indicator's value to guide our trading decisions. Specifically, when the Coppock Curve crosses above zero (> 0), we interpret this as a sign of upward momentum, signalling a potentially bullish market where entry trades may be favourable. Conversely, when the Coppock Curve crosses below or at zero (â‰¤ 0), it indicates a downward momentum, suggesting a bearish outlook. However, our decision to initiate an entry or exit at this stage depends on the VIX level.

The VIX level acts as a measure of market volatility, which we consider critical in deciding our actions. When the VIX level exceeds a predetermined threshold, it signals heightened volatility, prompting a more cautious approach, regardless of whether the Coppock Curve indicates bullish or bearish conditions. Conversely, when the VIX level is below or at this threshold, it suggests a more stable market environment.

Our approach to entry and exit signals is grounded in key indicators and a dynamic calibration process. An exit signal is generated only when the Coppock Curve crosses below or at zero while the VIX level is above the threshold, indicating both a bearish trend and elevated market risk. In all other cases, where an exit is not warranted, we assess the magnitude of entry based on the signal's strength. This strength is dynamically calibrated according to the stockâ€™s Coppock Curve value and current market volatility, using our proprietary PositionOptima mechanism. This adaptive, multi-factorial approach allows for precise allocation adjustments which will be further detailed in Section 4.

## 3 Variations
In financial strategy development, optimising for distinct investment objectives requires targeted adjustments to key parameters. Here, the trading strategy was adapted into three primary approaches â€” Return Driven, Risk Driven, and Sharpe Driven â€” each aligned with specific investor goals. By modifying input parameters such as periods for weighted moving average, long and short rates of change, VIX thresholds, and portfolios, the strategy was tailored to meet different needs: maximising raw returns, minimising risk exposure, or balancing risk with returns to achieve an optimal Sharpe ratio. 

These modifications reflect the diversity of investor preferences, as some may prioritise growth, others stability, and still others a blend of both. Consequently, each approach offers a unique path to navigating financial markets. The following analysis examines each variation in detail, highlighting how targeted adjustments enabled the strategy to cater to differing risk and return preferences.

1. The Return Driven approach focused on maximising profit potential by loosening risk controls to capture high returns.

2. The Risk Driven approach prioritised stability and capital preservation, limiting exposure to high-risk periods. This approach aimed for consistent, lower-volatility
returns, appealing to risk-averse investors.

3. The Sharpe Driven approach sought a balance between returns and risk, maximising the Sharpe ratio for optimal risk-adjusted performance. This approach aimed for steady returns across varying market conditions, catering to investors who value both growth and stability.

To generate the parameters for each approach, we used a scale-down version of the Coppock Curve. Scaling down this long-term momentum indicator made it more relevant to these shorter-term approaches that utilise a 10 - 15 day trading window. Moreover, we employed a Grid Search algorithm to systematically determine the optimal set of values for the trading window and VIX threshold to improve their performance. Therefore, these parameter values for each approach were not fixed manually, and were instead optimally selected. The only fixed parameters included the benchmark, start and end periods, interval, capital, transaction cost and verbose

## 4 COVIX PositionOptima

### 4.1 The Dynamic Weight Allocation and Position-Sizing Mechanism
COVIX PositionOptima is our innovative dynamic weight allocation and position-sizing mechanism designed specifically for the COVIX strategy. This advanced mechanism tailors position sizes in response to both trend strength and market volatility, aiming to optimise returns while controlling risk. By dynamically adjusting the weight allocation based on the Coppock Curveâ€™s long-term momentum signals and VIXâ€™s market sentiment measure, PositionOptima achieves an adaptive stance on position sizing, scaling the exposure up or down depending on market conditions. This approach allows for a more nuanced allocation that can respond to the potential risk and reward presented by fluctuating market sentiments and price momentum.

The core logic behind PositionOptima involves using the Coppock Curve value and VIX level to determine the weight of each position, factoring in both market momentum and volatility.

If the Coppock Curve is positive, suggesting an upward trend, PositionOptima adjusts the weight upward if the VIX is lower than its threshold, indicating calmer market conditions. The weight allocation is `min(max_position, base_position * (1 + coppock_value / 10))`. Here, the weight is calculated as the base position size, scaled by a factor of value `1 + (ğ¶ğ‘œğ‘ğ‘ğ‘œğ‘ğ‘˜ ğ‘£ğ‘ğ‘™ğ‘¢ğ‘’ / 10)`, with a cap at the maximum position size to prevent excessive exposure. This scaling factor of `(ğ¶ğ‘œğ‘ğ‘ğ‘œğ‘ğ‘˜ ğ‘£ğ‘ğ‘™ğ‘¢ğ‘’ / 10)` provides a moderate increase, ensuring that positive Coppock values lead to proportional exposure while avoiding extreme risk. For example, if the Coppock value is 10 this would result in a 100% increase from the base position size. This means that for a base position of 5% of total capital, a Coppock value of 10 would push the weight allocation to 0.10, leveraging the signal strength without overextending in one position. VIX values above the threshold indicate higher volatility in the market and PositionOptima assigns the base position as the weight to minimise exposure and avoid higher risk.

Conversely, when the Coppock Curve is negative, PositionOptima adopts a more cautious approach. The weight allocation is `-min(max_position, base_position * (1 + coppock_value / 100))`. If VIX exceeds its threshold, indicating higher volatility, the weight shifts to a negative position proportionally sized to the Coppock Curve's signal. Here, the weight calculation uses `(ğ¶ğ‘œğ‘ğ‘ğ‘œğ‘ğ‘˜ ğ‘£ğ‘ğ‘™ğ‘¢ğ‘’ / 100)` value, a less sensitive factor to avoid overexposure to downward trends in volatile conditions. This choice of scaling is designed to moderate short exposure, making it less aggressive as downward market movements tend to be more volatile and unpredictable. For instance, if the Coppock value is -10 and base position is 5%, the scaling factor would produce a weight allocation of 0.045, ensuring conservative exposure during downturns.

This proportional scaling approach is a major strength of COVIX trading strategy as it captures trends effectively, with positive Coppock values gradually raising exposure to favourable positions. By employing the moderate scaling factor for positive trends, PositionOptima balances risk and reward, enhancing potential returns without excessive risk. Similarly, in downturns, the strategy also scales down exposure to reflect the market's negative momentum signals, thus enabling safer portfolio adjustments in line with market sentiment. 

After determining the weight allocation for each stock in the portfolio, PositionOptima will then calculate the respective relative weights to ascertain the proportion of capital allocated for each stock, or known as  position-sizing. For instance, if AAPL has a weight allocation of 0.05 and the total weight allocation is 0.80, then the relative weight of AAPL is $(0.05 / 0.80 = 0.0625)$ . If the available capital is $100,000, this means AAPL will have a position size of $6,250.

Overall, COVIX PositionOptima is designed to achieve a finely balanced dynamic allocation, automatically adjusting positions in response to shifts in both price momentum and market sentiment. By relying on this nuanced approach, PositionOptima seeks to capture upside potential when momentum and sentiment align while prudently limiting exposure during periods of heightened uncertainty or market downturns. This strategic mechanism thus provides a robust framework for managing market volatility in alignment with trend-following principles.

### 4.2 Portfolio Rebalancing
COVIX PositionOptima facilitates daily portfolio rebalancing by leveraging the insights from the Coppock Curve and VIX indicators. Each trading day, the strategy evaluates prevailing marketconditions and the performance of individual stocks to determine the optimal capital distribution across the portfolio. This dynamic allocation ensures that the capital weight of each stock can vary from day to day, reflecting the most current information and market sentiment.

Frequent rebalancing helps mitigate the effects of market fluctuations and adverse trends, reducing potential losses during periods of high volatility. By continuously recalibrating the portfolio, the strategy enhances its ability to achieve optimal returns while remaining resilient to changing market dynamics. This disciplined, data driven methodology underscores the importance of responsiveness in investment management, ultimately fostering a more robust
and adaptive portfolio.

Consequently, daily rebalancing is a fundamental strength of the COVIX trading strategy as the frequent recalibration enables it to optimise each stockâ€™s weight based on real-time signals, ensuring that portfolio resources are directed towards favourable investment opportunities. By maintaining appropriate allocations daily, this strategy reduces the risk of holding underperforming stocks, fostering a more resilient portfolio aligned with favourable conditions.

### 4.3 Risk Management
Risk management is integral in COVIX PositionOptima which employs several key mechanisms to mitigate potential losses and enhance the overall robustness of the portfolio. One of the primary methods is dynamic weight allocation, which adjusts the capital allocation to each stock based on real-time market signals from the Coppock Curve and VIX indicators. This responsiveness allows the portfolio to pivot quickly in reaction to changing market conditions, effectively managing the risk of significant drawdowns by decreasing exposure to underperforming stocks or sectors.

Additionally, the strategy utilises daily rebalancing to maintain the desired risk profile. By continuously evaluating and readjusting positions, the strategy can reduce allocations to stocks that exhibit weakening signals or in response to increased market volatility, as indicated by the VIX relative to its threshold. This approach not only limits potential losses but also ensures that capital is deployed in line with opportunities during favourable market conditions.

Position sizing is another crucial element of the risk management framework. COVIX PositionOptima considers both the available capital and the risk associated with each stock. By calculating the appropriate position size based on the capital weight relative to the total balance,the strategy prevents overexposure to any single investment, thereby ensuring that no single loss can significantly impact the overall portfolio. This disciplined approach fosters greater capital preservation.

Overall, the multifaceted risk management framework reflected by COVIX PositionOptima integrates dynamic adjustments, systematic rebalancing, and disciplined position sizing to effectively navigate market volatility, enhancing the potential for achieving optimal returns in varying market environments.


### 5 Assumptions
Several key assumptions will be maintained throughout our backtesting strategy, which may limit how applicable these strategies might be in real-world scenarios. We will outline these assumptions below:

Firstly, we assume there are no transaction costs. Implementing the dynamic weight allocation as described earlier would require daily portfolio rebalancing, which would realistically result in sizable transaction fees. To better assess the strategyâ€™s performance, we have maintained this assumption in our backtesting process.

Secondly, we will assume that trades are executed precisely at the closing price for each stock every day. In reality, this could be unrealistic due to factors such as low market liquidity, heightened trading interest towards the end of the day from traders for reporting or benchmarking purposes, as well as latency in trade execution. These factors may lead to price fluctuations, making it difficult to execute live trades at the specified closing price.

Thirdly, in calculating the Sharpe Ratio for each portfolio, we will assume the risk free rate in our calculations to be 0. Realistically, this would be improbable as the risk free rate compensates for the time value of money, inflation and an expected baseline return for the safest investments. However, to focus on analysing the performance of this trading strategy, this value will be kept at 0 across the training and test period.

The default values of `base_position=0.05` and `max_position=0.5` for PositionOptima aim to balance exposure while limiting risk across market conditions. A `base_position` of 0.05 represents a conservative entry level, ensuring minimal yet meaningful allocation during high volatility or weak signals. In contrast, a `max_position` of 0.5 sets an upper exposure limit, allowing the portfolio to leverage strong bullish signals, particularly in stable, low-volatility markets. This approach scales dynamically with each stock's Coppock Curve strength, creating a smooth transition from conservative to aggressive allocations without abrupt increases in risk.